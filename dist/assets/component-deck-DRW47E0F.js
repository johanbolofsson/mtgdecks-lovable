import{j as e,T as a,C as s,B as r,r as c,a as l,D as i}from"./react-core-CnGHm5UM.js";import{p as t,L as n,I as d,q as o,r as m,s as h,t as p,u,v as f,B as v}from"./component-ui-BiEVUsOz.js";import{s as N}from"./component-AddGameForm.tsx-Cddvg6Xq.js";import{u as x}from"./hooks-k93NwXX7.js";const y=({colors:a,colorMap:s})=>{const r=Array.isArray(c=a)?c.flatMap((e=>"string"==typeof e?e.split(""):[])):[];var c;return e.jsx("div",{className:"flex items-center space-x-1",children:r.map(((a,r)=>e.jsx("div",{className:`w-4 h-4 rounded-full ${s[a]||"bg-gray-400"} border border-white`},`${a}-${r}`)))})},C=({winRate:s,totalGames:r})=>e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(a,{className:"h-4 w-4 text-yellow-300"}),e.jsxs("span",{className:"text-sm font-medium",children:[s,"% Win Rate"]})]}),e.jsxs(t,{variant:"secondary",className:"bg-white/20",children:[r," Games"]})]}),b=({commander:a,format:c})=>e.jsxs(e.Fragment,{children:[a&&e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(s,{className:"h-4 w-4 text-yellow-300"}),e.jsx("span",{className:"text-sm",children:a})]}),c&&e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(r,{className:"h-4 w-4 text-blue-200"}),e.jsx("span",{className:"text-sm",children:c})]})]}),g=[{id:"W",label:"White"},{id:"U",label:"Blue"},{id:"B",label:"Black"},{id:"R",label:"Red"},{id:"G",label:"Green"},{id:"C",label:"Colorless"}],w=["Standard","Modern","Pioneer","Legacy","Vintage","Commander","Pauper","Historic","Alchemy"];function k(){const[a,s]=c.useState(""),[r,t]=c.useState(""),[y,C]=c.useState(""),[b,k]=c.useState([]),{toast:j}=x(),F=l();return e.jsxs("form",{onSubmit:async e=>{e.preventDefault();const{error:s}=await N.from("deck").insert({name:a,properties:{commander:r,format:y,colors:b,winRate:0,totalGames:0}});if(s)j({variant:"destructive",title:"Error creating deck",description:s.message});else{j({title:"Deck created successfully",description:"Created deck: "+a});const e=document.querySelector("[data-dialog-close]");e&&e.click(),F(0)}},className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"name",children:"Deck Name"}),e.jsx(d,{id:"name",value:a,onChange:e=>s(e.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"commander",children:"Commander (Optional)"}),e.jsx(d,{id:"commander",value:r,onChange:e=>t(e.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"format",children:"Format"}),e.jsxs(o,{value:y,onValueChange:C,required:!0,children:[e.jsx(m,{children:e.jsx(h,{placeholder:"Select a format"})}),e.jsx(p,{children:w.map((a=>e.jsx(u,{value:a,children:a},a)))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Color Identity"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:g.map((a=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(f,{id:"color-"+a.id,checked:b.includes(a.id),onCheckedChange:e=>((e,a)=>{"C"===e&&a?k(["C"]):"C"!==e||a?b.includes("C")?k([e]):k((s=>a?[...s,e]:s.filter((a=>a!==e)))):k([])})(a.id,e)}),e.jsx(n,{htmlFor:"color-"+a.id,children:a.label})]},a.id)))})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(i,{asChild:!0,children:e.jsx(v,{variant:"outline",type:"button",children:"Cancel"})}),e.jsx(v,{type:"submit",children:"Create Deck"})]})]})}export{y as C,b as D,C as a,k as b};
